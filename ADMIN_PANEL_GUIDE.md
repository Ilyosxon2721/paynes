# Paynes - Руководство по Админ-панели

## Доступ к админ-панели

**URL**: `http://ваш-домен.com/admin`

**Учетные данные**:
- Логин: `admin`
- Пароль: `admin123`

> **Важно**: После первого входа обязательно смените пароль администратора!

## Возможности админ-панели

### 1. Управление Платежами (Транзакции → Платежи)

**Функции**:
- Просмотр всех платежей с фильтрацией по:
  - Статусу (Ожидание, Подтвержден, Обработан, Удален)
  - Типу платежа
  - Кассиру
  - Дате (от/до)
- Создание новых платежей
- Редактирование существующих
- Просмотр детальной информации
- Удаление и восстановление платежей
- Экспорт данных

**Особенности**:
- Автоматический расчет комиссии при выборе типа платежа и суммы
- Поддержка валют: UZS, USD
- Способы оплаты: Наличные, Карта

### 2. Управление Пользователями (Управление → Пользователи)

**Функции**:
- Создание новых кассиров и администраторов
- Управление правами доступа через роли
- Просмотр статистики по кассирам
- Блокировка/активация учетных записей
- Назначение филиалов

**Роли**:
- **admin** - полный доступ к системе и админ-панели
- **cashier** - доступ только к кассовому интерфейсу

### 3. Управление Агентами (Управление → Агенты)

**Функции**:
- Регистрация новых агентов
- Управление процентом вознаграждения
- Просмотр статистики по агентам
- Деактивация агентов

### 4. Типы Платежей (Настройки → Типы платежей)

**Функции**:
- Создание новых типов платежей
- Настройка комиссий:
  - Процентная комиссия
  - Фиксированная комиссия
- Указание банковских реквизитов организации:
  - Номер счета
  - МФО
  - ИНН
  - Казначейский счет

**Примеры типов**:
- Коммунальные платежи
- Государственные налоги
- Мобильная связь
- Интернет
- И т.д.

### 5. Курсы Валют (Настройки → Курсы валют)

**Функции**:
- Управление курсами обмена валют
- Установка курсов покупки и продажи
- История изменений курсов
- Актуализация курсов

### 6. Обмен Валют (Транзакции → Обмен валют)

**Функции**:
- Просмотр всех операций обмена
- Создание новых обменов
- Фильтрация и поиск
- Статистика по обменам

### 7. Кредиты (Транзакции → Кредиты)

**Функции**:
- Учет выданных кредитов
- Отслеживание платежей
- Просмотр задолженностей
- Управление сроками

### 8. Инкассация (Транзакции → Инкассация)

**Функции**:
- Регистрация инкассаций
- Учет сданных денежных средств
- Просмотр истории
- Статистика по кассам

## Фильтры и Поиск

Все таблицы поддерживают:
- **Поиск** по текстовым полям
- **Фильтрация** по различным параметрам
- **Сортировка** по колонкам
- **Пагинация** (20 записей на страницу)
- **Экспорт** данных в CSV/Excel

## Горячие клавиши

- `Ctrl + K` - Глобальный поиск
- `Ctrl + /` - Открыть/закрыть боковое меню

## Безопасность

### Права доступа

Только пользователи с ролью `admin` и статусом `active` имеют доступ к админ-панели.

### Рекомендации:

1. **Смените пароль администратора** сразу после первого входа
2. **Создайте резервные копии** базы данных регулярно
3. **Используйте HTTPS** в production
4. **Ограничьте IP-адреса** для доступа к /admin через настройки веб-сервера
5. **Включите двухфакторную аутентификацию** (требует дополнительной настройки)

## Отчеты и Статистика

### Доступные отчеты:

1. **Сводка по платежам**
   - За день/неделю/месяц
   - По типам платежей
   - По кассирам
   - По филиалам

2. **Финансовая отчетность**
   - Оборот
   - Комиссии
   - Кэшбэк

3. **Статистика кассиров**
   - Количество операций
   - Сумма обработанных платежей
   - Начисленная зарплата

## Настройка Филиалов

Для добавления нового филиала:

1. Перейдите в "Управление → Пользователи"
2. Создайте нового пользователя-кассира
3. Укажите название филиала в поле "Филиал"
4. Система автоматически группирует отчеты по филиалам

## Резервное Копирование

### Ручное создание backup:

```bash
php artisan backup:run
```

### Автоматическое резервное копирование:

Настройте cron задачу:
```bash
0 2 * * * cd /path/to/paynes && php artisan backup:run --only-db >> /dev/null 2>&1
```

## Техническая Поддержка

При возникновении проблем:

1. Проверьте логи: `storage/logs/laravel.log`
2. Очистите кеш: `php artisan optimize:clear`
3. Свяжитесь с технической поддержкой

## Обновление Системы

```bash
# 1. Создайте резервную копию
php artisan backup:run

# 2. Обновите код
git pull origin main

# 3. Обновите зависимости
composer install --no-dev --optimize-autoloader
npm install && npm run build

# 4. Выполните миграции
php artisan migrate --force

# 5. Очистите кеш
php artisan optimize:clear
php artisan config:cache
php artisan route:cache
php artisan view:cache
```

## Часто Задаваемые Вопросы

### Q: Как сбросить пароль администратора?

A: Выполните команду:
```bash
php artisan tinker
$admin = App\Models\User::where('login', 'admin')->first();
$admin->password = 'новый_пароль';
$admin->save();
```

### Q: Как добавить нового администратора?

A: В админ-панели:
1. Управление → Пользователи → Создать
2. Заполните форму
3. Назначьте роль "admin"

### Q: Платежи не отображаются в кассовом интерфейсе

A: Проверьте:
1. Фильтры в интерфейсе кассира
2. Статус платежей (должен быть confirmed или processed)
3. Логи на наличие ошибок

### Q: Как экспортировать отчет?

A:
1. Откройте нужную таблицу (например, Платежи)
2. Примените необходимые фильтры
3. Нажмите кнопку "Экспорт" в правом верхнем углу
4. Выберите формат (CSV или Excel)

---

**Версия**: 2.0.0
**Последнее обновление**: Январь 2026
