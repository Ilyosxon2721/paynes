import{a as l,o as n,b as s,t,n as M,g as es,q as ns,c as V,r as p,y as ls,i as N,A as os,s as W,j as is,B as ds,F as cs,e as rs,d as I,w as A,f as us,z as H}from"./app-DmhU3QBQ.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";const vs={class:"balance-cards"},_s={class:"balance-card balance-card--cash-uzs"},hs={class:"balance-card__content"},bs={class:"balance-card__value"},ms={class:"balance-card balance-card--cashless-uzs"},gs={class:"balance-card__content"},ps={class:"balance-card__value"},fs={class:"balance-card balance-card--card-uzs"},ys={class:"balance-card__content"},ws={class:"balance-card__value"},xs={class:"balance-card balance-card--p2p-uzs"},ks={class:"balance-card__content"},Ss={class:"balance-card__value"},zs={class:"balance-card balance-card--cash-usd"},$s={class:"balance-card__content"},Us={class:"balance-card__value"},Bs={__name:"BalanceCards",props:{balances:{type:Object,default:()=>({cash_uzs:0,cashless_uzs:0,card_uzs:0,p2p_uzs:0,cash_usd:0})}},setup(u){const v=(R,e="UZS")=>`${new Intl.NumberFormat("ru-RU",{minimumFractionDigits:2,maximumFractionDigits:2}).format(R||0)} ${e}`;return(R,e)=>{var m,k,f,d,c,w,y,x,S,_;return n(),l("div",vs,[s("div",_s,[e[1]||(e[1]=s("div",{class:"balance-card__icon"},[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[s("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),s("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})])],-1)),s("div",hs,[e[0]||(e[0]=s("div",{class:"balance-card__label"},"–ù–∞–ª–∏—á–Ω—ã–µ UZS",-1)),s("div",bs,t(v((m=u.balances)==null?void 0:m.cash_uzs)),1)]),s("div",{class:M(["balance-card__indicator",{"balance-card__indicator--negative":(((k=u.balances)==null?void 0:k.cash_uzs)||0)<0}])},null,2)]),s("div",ms,[e[3]||(e[3]=s("div",{class:"balance-card__icon"},[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[s("rect",{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"}),s("line",{x1:"1",y1:"10",x2:"23",y2:"10"})])],-1)),s("div",gs,[e[2]||(e[2]=s("div",{class:"balance-card__label"},"–ë–µ–∑–Ω–∞–ª–∏—á–Ω—ã–µ UZS",-1)),s("div",ps,t(v((f=u.balances)==null?void 0:f.cashless_uzs)),1)]),s("div",{class:M(["balance-card__indicator",{"balance-card__indicator--negative":(((d=u.balances)==null?void 0:d.cashless_uzs)||0)<0}])},null,2)]),s("div",fs,[e[5]||(e[5]=s("div",{class:"balance-card__icon"},[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[s("rect",{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"}),s("line",{x1:"1",y1:"10",x2:"23",y2:"10"})])],-1)),s("div",ys,[e[4]||(e[4]=s("div",{class:"balance-card__label"},"–ö–∞—Ä—Ç—ã UZS",-1)),s("div",ws,t(v((c=u.balances)==null?void 0:c.card_uzs)),1)]),s("div",{class:M(["balance-card__indicator",{"balance-card__indicator--negative":(((w=u.balances)==null?void 0:w.card_uzs)||0)<0}])},null,2)]),s("div",xs,[e[7]||(e[7]=es('<div class="balance-card__icon" data-v-329d2612><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-329d2612><path d="M17 18a5 5 0 0 0-10 0" data-v-329d2612></path><line x1="12" y1="2" x2="12" y2="9" data-v-329d2612></line><path d="M4.22 10.22a15 15 0 0 1 15.56 0" data-v-329d2612></path></svg></div>',1)),s("div",ks,[e[6]||(e[6]=s("div",{class:"balance-card__label"},"P2P UZS",-1)),s("div",Ss,t(v((y=u.balances)==null?void 0:y.p2p_uzs)),1)]),s("div",{class:M(["balance-card__indicator",{"balance-card__indicator--negative":(((x=u.balances)==null?void 0:x.p2p_uzs)||0)<0}])},null,2)]),s("div",zs,[e[9]||(e[9]=s("div",{class:"balance-card__icon"},[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[s("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),s("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})])],-1)),s("div",$s,[e[8]||(e[8]=s("div",{class:"balance-card__label"},"–ù–∞–ª–∏—á–Ω—ã–µ USD",-1)),s("div",Us,t(v((S=u.balances)==null?void 0:S.cash_usd,"USD")),1)]),s("div",{class:M(["balance-card__indicator",{"balance-card__indicator--negative":(((_=u.balances)==null?void 0:_.cash_usd)||0)<0}])},null,2)])])}}},X=Y(Bs,[["__scopeId","data-v-329d2612"]]),Cs={class:"dashboard"},Ds={class:"welcome-card"},Zs={key:0,class:"shift-info"},Fs={class:"shift-badge"},Ms={key:0,class:"branch-filter"},Ns={class:"filter-group"},Is=["value"],Rs={key:1,class:"section-title"},Vs={class:"stats-grid"},As={class:"stat-card"},Hs={class:"stat-info"},Ts={key:0,class:"stat-value"},Ps={key:1,class:"stat-value"},js={class:"stat-count"},qs={class:"stat-amount"},Es={class:"stat-card"},Ls={class:"stat-info"},Os={key:0,class:"stat-value"},Gs={key:1,class:"stat-value"},Js={class:"stat-count"},Ks={class:"stat-amount"},Qs={class:"stat-card"},Ws={class:"stat-info"},Xs={key:0,class:"stat-value"},Ys={key:1,class:"stat-value"},sa={class:"stat-count"},aa={class:"stat-amount"},ta={class:"stat-card"},ea={class:"stat-info"},na={key:0,class:"stat-value"},la={key:1,class:"stat-value"},oa={class:"stat-count"},ia={class:"stat-amount"},da={key:3,class:"overall-section"},ca={class:"stats-grid"},ra={class:"stat-card"},ua={class:"stat-info"},va={key:0,class:"stat-value"},_a={key:1,class:"stat-value"},ha={class:"stat-count"},ba={class:"stat-amount"},ma={class:"stat-card"},ga={class:"stat-info"},pa={key:0,class:"stat-value"},fa={key:1,class:"stat-value"},ya={class:"stat-count"},wa={class:"stat-amount"},xa={class:"stat-card"},ka={class:"stat-info"},Sa={key:0,class:"stat-value"},za={key:1,class:"stat-value"},$a={class:"stat-count"},Ua={class:"stat-amount"},Ba={class:"stat-card"},Ca={class:"stat-info"},Da={key:0,class:"stat-value"},Za={key:1,class:"stat-value"},Fa={class:"stat-count"},Ma={class:"stat-amount"},Na={class:"quick-actions"},Ia={class:"action-buttons"},Ra={__name:"Dashboard",setup(u){const v=ns(),R=V(()=>{var o;return((o=v.user)==null?void 0:o.position)==="admin"?"–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä":"–ö–∞—Å—Å–∏—Ä"}),e=V(()=>{var o;return((o=v.user)==null?void 0:o.position)==="cashier"}),m=V(()=>{var o;return((o=v.user)==null?void 0:o.position)==="admin"}),k=()=>({payments:{count:0,total:0},exchanges:{count:0,total:0},credits:{count:0,total:0},incashes:{count:0,total:0}}),f=()=>({cash_uzs:0,cashless_uzs:0,card_uzs:0,p2p_uzs:0,cash_usd:0}),d=p(k()),c=p(k()),w=p(null),y=p(f()),x=p(f()),S=p([]),_=p(""),ss=V(()=>_.value?`–§–∏–ª–∏–∞–ª: ${_.value}`:"–í—Å–µ —Ñ–∏–ª–∏–∞–ª—ã"),h=p(!1);async function T(){var o,a,r,b,z,$,U,B,C,D,Z;h.value=!0;try{if(e.value){const i=await H.get("/reports/cashier-dashboard");i.data.success&&(w.value=i.data.data,y.value=i.data.data.balances,d.value={payments:{count:((o=i.data.data.payments)==null?void 0:o.count)||0,total:((a=i.data.data.payments)==null?void 0:a.total)||0},exchanges:{count:((r=i.data.data.exchanges)==null?void 0:r.count)||0,total:((b=i.data.data.exchanges)==null?void 0:b.total_uzs)||0},credits:{count:((z=i.data.data.credits)==null?void 0:z.count)||0,total:(($=i.data.data.credits)==null?void 0:$.total_issued)||0},incashes:{count:(((B=(U=i.data.data.incashes)==null?void 0:U.income)==null?void 0:B.count)||0)+(((D=(C=i.data.data.incashes)==null?void 0:C.expense)==null?void 0:D.count)||0),total:((Z=i.data.data.incashes)==null?void 0:Z.balance)||0}})}else await as()}catch(i){console.error("Error loading stats:",i)}finally{h.value=!1}}async function as(){const o=new Date().toISOString().split("T")[0],a={start_date:o,end_date:o},r=await H.get("/reports/general",{params:a});if(r.data.success&&(c.value=r.data.data,x.value=r.data.data.balances||f(),S.value=r.data.data.branches||[]),_.value){const b=await H.get("/reports/general",{params:{...a,branch:_.value}});if(b.data.success){d.value=b.data.data,y.value=b.data.data.balances||f();return}}d.value=c.value,y.value=x.value}function g(o){return new Intl.NumberFormat("ru-RU",{minimumFractionDigits:2,maximumFractionDigits:2}).format(o||0)}function ts(o){return o?new Date(o).toLocaleString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):""}return ls(()=>{T()}),(o,a)=>{var b,z,$,U,B,C,D,Z,i,P,j,q,E,L,O,G,J,K,Q;const r=us("router-link");return n(),l("div",Cs,[a[25]||(a[25]=s("h1",{class:"page-title"},"–ì–ª–∞–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å",-1)),s("div",Ds,[s("h2",null,"–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, "+t((b=W(v).user)==null?void 0:b.full_name)+"!",1),s("p",null,t(R.value)+" - "+t(((z=W(v).user)==null?void 0:z.branch)||"–ì–ª–∞–≤–Ω—ã–π –æ—Ñ–∏—Å"),1),e.value&&(($=w.value)!=null&&$.shift)?(n(),l("div",Zs,[s("span",Fs,"–°–º–µ–Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∞: "+t(ts(w.value.shift.opened_at)),1)])):N("",!0)]),m.value?(n(),l("div",Ms,[s("div",Ns,[a[2]||(a[2]=s("label",null,"–§–∏–ª–∏–∞–ª",-1)),is(s("select",{"onUpdate:modelValue":a[0]||(a[0]=F=>_.value=F),onChange:T,class:"filter-select"},[a[1]||(a[1]=s("option",{value:""},"–í—Å–µ —Ñ–∏–ª–∏–∞–ª—ã",-1)),(n(!0),l(cs,null,rs(S.value,F=>(n(),l("option",{key:F,value:F},t(F),9,Is))),128))],544),[[ds,_.value]])])])):N("",!0),m.value?(n(),l("h3",Rs,t(ss.value),1)):N("",!0),e.value||m.value?(n(),os(X,{key:2,balances:y.value},null,8,["balances"])):N("",!0),s("div",Vs,[s("div",As,[a[4]||(a[4]=s("div",{class:"stat-icon"},"üí≥",-1)),s("div",Hs,[a[3]||(a[3]=s("div",{class:"stat-label"},"–ü–ª–∞—Ç–µ–∂–∏",-1)),h.value?(n(),l("div",Ts,"...")):(n(),l("div",Ps,[s("div",js,t(((U=d.value.payments)==null?void 0:U.count)||0),1),s("div",qs,t(g((B=d.value.payments)==null?void 0:B.total))+" UZS",1)]))])]),s("div",Es,[a[6]||(a[6]=s("div",{class:"stat-icon"},"üí±",-1)),s("div",Ls,[a[5]||(a[5]=s("div",{class:"stat-label"},"–û–±–º–µ–Ω –≤–∞–ª—é—Ç",-1)),h.value?(n(),l("div",Os,"...")):(n(),l("div",Gs,[s("div",Js,t(((C=d.value.exchanges)==null?void 0:C.count)||0),1),s("div",Ks,t(g((D=d.value.exchanges)==null?void 0:D.total))+" UZS",1)]))])]),s("div",Qs,[a[8]||(a[8]=s("div",{class:"stat-icon"},"üí∞",-1)),s("div",Ws,[a[7]||(a[7]=s("div",{class:"stat-label"},"–ö—Ä–µ–¥–∏—Ç—ã",-1)),h.value?(n(),l("div",Xs,"...")):(n(),l("div",Ys,[s("div",sa,t(((Z=d.value.credits)==null?void 0:Z.count)||0),1),s("div",aa,t(g((i=d.value.credits)==null?void 0:i.total))+" UZS",1)]))])]),s("div",ta,[a[10]||(a[10]=s("div",{class:"stat-icon"},"üíµ",-1)),s("div",ea,[a[9]||(a[9]=s("div",{class:"stat-label"},"–ò–Ω–∫–∞—Å—Å–∞—Ü–∏—è",-1)),h.value?(n(),l("div",na,"...")):(n(),l("div",la,[s("div",oa,t(((P=d.value.incashes)==null?void 0:P.count)||0),1),s("div",ia,t(g((j=d.value.incashes)==null?void 0:j.total))+" UZS",1)]))])])]),m.value&&_.value?(n(),l("div",da,[a[19]||(a[19]=s("h3",{class:"section-title"},"–û–±—â–∏–π –∏—Ç–æ–≥",-1)),I(X,{balances:x.value},null,8,["balances"]),s("div",ca,[s("div",ra,[a[12]||(a[12]=s("div",{class:"stat-icon"},"üí≥",-1)),s("div",ua,[a[11]||(a[11]=s("div",{class:"stat-label"},"–ü–ª–∞—Ç–µ–∂–∏",-1)),h.value?(n(),l("div",va,"...")):(n(),l("div",_a,[s("div",ha,t(((q=c.value.payments)==null?void 0:q.count)||0),1),s("div",ba,t(g((E=c.value.payments)==null?void 0:E.total))+" UZS",1)]))])]),s("div",ma,[a[14]||(a[14]=s("div",{class:"stat-icon"},"üí±",-1)),s("div",ga,[a[13]||(a[13]=s("div",{class:"stat-label"},"–û–±–º–µ–Ω –≤–∞–ª—é—Ç",-1)),h.value?(n(),l("div",pa,"...")):(n(),l("div",fa,[s("div",ya,t(((L=c.value.exchanges)==null?void 0:L.count)||0),1),s("div",wa,t(g((O=c.value.exchanges)==null?void 0:O.total))+" UZS",1)]))])]),s("div",xa,[a[16]||(a[16]=s("div",{class:"stat-icon"},"üí∞",-1)),s("div",ka,[a[15]||(a[15]=s("div",{class:"stat-label"},"–ö—Ä–µ–¥–∏—Ç—ã",-1)),h.value?(n(),l("div",Sa,"...")):(n(),l("div",za,[s("div",$a,t(((G=c.value.credits)==null?void 0:G.count)||0),1),s("div",Ua,t(g((J=c.value.credits)==null?void 0:J.total))+" UZS",1)]))])]),s("div",Ba,[a[18]||(a[18]=s("div",{class:"stat-icon"},"üíµ",-1)),s("div",Ca,[a[17]||(a[17]=s("div",{class:"stat-label"},"–ò–Ω–∫–∞—Å—Å–∞—Ü–∏–∏",-1)),h.value?(n(),l("div",Da,"...")):(n(),l("div",Za,[s("div",Fa,t(((K=c.value.incashes)==null?void 0:K.count)||0),1),s("div",Ma,t(g((Q=c.value.incashes)==null?void 0:Q.total))+" UZS",1)]))])])])])):N("",!0),s("div",Na,[a[24]||(a[24]=s("h3",null,"–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è",-1)),s("div",Ia,[I(r,{to:"/payments/create",class:"action-btn"},{default:A(()=>[...a[20]||(a[20]=[s("span",null,"üí≥",-1),s("span",null,"–ù–æ–≤—ã–π –ø–ª–∞—Ç–µ–∂",-1)])]),_:1}),I(r,{to:"/exchanges/create",class:"action-btn"},{default:A(()=>[...a[21]||(a[21]=[s("span",null,"üí±",-1),s("span",null,"–û–±–º–µ–Ω –≤–∞–ª—é—Ç—ã",-1)])]),_:1}),I(r,{to:"/credits/create",class:"action-btn"},{default:A(()=>[...a[22]||(a[22]=[s("span",null,"üí∞",-1),s("span",null,"–ù–æ–≤—ã–π –∫—Ä–µ–¥–∏—Ç",-1)])]),_:1}),I(r,{to:"/incashes/create",class:"action-btn"},{default:A(()=>[...a[23]||(a[23]=[s("span",null,"üíµ",-1),s("span",null,"–ò–Ω–∫–∞—Å—Å–∞—Ü–∏—è",-1)])]),_:1})])])])}}},Ha=Y(Ra,[["__scopeId","data-v-50ac8f21"]]);export{Ha as default};
