import{r as l,y as E,z as _,a as d,o as m,b as t,i as V,t as s,F as N,e as S,k as z,j as i,l as u,n as $}from"./app-DmhU3QBQ.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";const P={class:"payment-types-page"},Z={key:0,class:"loading"},j={key:1,class:"alert alert-error"},q={key:2,class:"table-card"},L={class:"data-table"},R={class:"action-buttons"},A=["onClick"],G=["onClick"],H={class:"modal-header"},J={class:"modal-body"},K={class:"form-group"},O={key:0,class:"error-message"},Q={class:"form-group"},W={class:"form-row"},X={class:"form-group"},Y={class:"form-group"},T={class:"form-row"},tt={class:"form-group"},et={class:"form-group"},nt={class:"form-group"},ot={class:"form-row"},at={class:"form-group"},st={class:"form-group"},lt={class:"modal-footer"},it=["disabled"],ut={__name:"Index",setup(rt){const C=l([]),g=l(!1),v=l(null),f=l(!1),p=l(!1),y=l(null),b=l(!1),r=l({}),k={name:"",organization:"",bank:"",account_number:"",mfo:"",inn:"",treasury_account:"",commission_percentage:0,commission_fixed:0},o=l({...k});E(()=>{x()});async function x(){var a,e;g.value=!0,v.value=null;try{const n=await _.get("/payment-types");n.data.success&&(C.value=n.data.data)}catch(n){v.value=((e=(a=n.response)==null?void 0:a.data)==null?void 0:e.message)||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–∏–ø–æ–≤ –ø–ª–∞—Ç–µ–∂–µ–π"}finally{g.value=!1}}function M(){p.value=!1,y.value=null,o.value={...k},r.value={},f.value=!0}function h(a){p.value=!0,y.value=a.id,o.value={name:a.name,organization:a.organization||"",bank:a.bank||"",account_number:a.account_number||"",mfo:a.mfo||"",inn:a.inn||"",treasury_account:a.treasury_account||"",commission_percentage:a.commission_percentage||0,commission_fixed:a.commission_fixed||0},r.value={},f.value=!0}function w(){f.value=!1,o.value={...k},r.value={}}async function F(){var a,e,n,c;b.value=!0,r.value={};try{p.value?await _.put(`/payment-types/${y.value}`,o.value):await _.post("/payment-types",o.value),await x(),w()}catch(U){(e=(a=U.response)==null?void 0:a.data)!=null&&e.errors?r.value=U.response.data.errors:alert(((c=(n=U.response)==null?void 0:n.data)==null?void 0:c.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Ç–∏–ø–∞ –ø–ª–∞—Ç–µ–∂–∞")}finally{b.value=!1}}async function I(a){var e,n;if(confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —Ç–∏–ø –ø–ª–∞—Ç–µ–∂–∞?"))try{await _.delete(`/payment-types/${a}`),await x()}catch(c){alert(((n=(e=c.response)==null?void 0:e.data)==null?void 0:n.message)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Ç–∏–ø–∞ –ø–ª–∞—Ç–µ–∂–∞")}}function D(a){return new Intl.NumberFormat("ru-RU",{minimumFractionDigits:2,maximumFractionDigits:2}).format(a)}return(a,e)=>(m(),d("div",P,[t("div",{class:"page-header"},[e[10]||(e[10]=t("h1",{class:"page-title"},"–¢–∏–ø—ã –ø–ª–∞—Ç–µ–∂–µ–π",-1)),t("button",{onClick:M,class:"btn btn-primary"}," + –î–æ–±–∞–≤–∏—Ç—å —Ç–∏–ø –ø–ª–∞—Ç–µ–∂–∞ ")]),g.value?(m(),d("div",Z,"–ó–∞–≥—Ä—É–∑–∫–∞...")):v.value?(m(),d("div",j,s(v.value),1)):(m(),d("div",q,[t("table",L,[e[11]||(e[11]=t("thead",null,[t("tr",null,[t("th",null,"–ù–∞–∑–≤–∞–Ω–∏–µ"),t("th",null,"–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è"),t("th",null,"–ë–∞–Ω–∫"),t("th",null,"–°—á–µ—Ç"),t("th",null,"–ú–§–û"),t("th",null,"–ò–ù–ù"),t("th",null,"–ö–æ–º–∏—Å—Å–∏—è %"),t("th",null,"–ö–æ–º–∏—Å—Å–∏—è —Ñ–∏–∫—Å."),t("th",null,"–î–µ–π—Å—Ç–≤–∏—è")])],-1)),t("tbody",null,[(m(!0),d(N,null,S(C.value,n=>(m(),d("tr",{key:n.id},[t("td",null,s(n.name),1),t("td",null,s(n.organization),1),t("td",null,s(n.bank),1),t("td",null,s(n.account_number),1),t("td",null,s(n.mfo),1),t("td",null,s(n.inn),1),t("td",null,s(n.commission_percentage)+"%",1),t("td",null,s(D(n.commission_fixed))+" UZS",1),t("td",null,[t("div",R,[t("button",{onClick:c=>h(n),class:"btn-action btn-edit",title:"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"}," ‚úèÔ∏è ",8,A),t("button",{onClick:c=>I(n.id),class:"btn-action btn-delete",title:"–£–¥–∞–ª–∏—Ç—å"}," üóëÔ∏è ",8,G)])])]))),128))])])])),f.value?(m(),d("div",{key:3,class:"modal-overlay",onClick:w},[t("div",{class:"modal-content",onClick:e[9]||(e[9]=z(()=>{},["stop"]))},[t("div",H,[t("h2",null,s(p.value?"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–∏–ø –ø–ª–∞—Ç–µ–∂–∞":"–î–æ–±–∞–≤–∏—Ç—å —Ç–∏–ø –ø–ª–∞—Ç–µ–∂–∞"),1)]),t("div",J,[t("form",{onSubmit:z(F,["prevent"])},[t("div",K,[e[12]||(e[12]=t("label",{for:"name"},"–ù–∞–∑–≤–∞–Ω–∏–µ *",-1)),i(t("input",{id:"name","onUpdate:modelValue":e[0]||(e[0]=n=>o.value.name=n),type:"text",class:$(["form-input",{error:r.value.name}]),required:""},null,2),[[u,o.value.name]]),r.value.name?(m(),d("span",O,s(r.value.name[0]),1)):V("",!0)]),t("div",Q,[e[13]||(e[13]=t("label",{for:"organization"},"–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è",-1)),i(t("input",{id:"organization","onUpdate:modelValue":e[1]||(e[1]=n=>o.value.organization=n),type:"text",class:"form-input"},null,512),[[u,o.value.organization]])]),t("div",W,[t("div",X,[e[14]||(e[14]=t("label",{for:"bank"},"–ë–∞–Ω–∫",-1)),i(t("input",{id:"bank","onUpdate:modelValue":e[2]||(e[2]=n=>o.value.bank=n),type:"text",class:"form-input"},null,512),[[u,o.value.bank]])]),t("div",Y,[e[15]||(e[15]=t("label",{for:"account_number"},"–ù–æ–º–µ—Ä —Å—á–µ—Ç–∞",-1)),i(t("input",{id:"account_number","onUpdate:modelValue":e[3]||(e[3]=n=>o.value.account_number=n),type:"text",class:"form-input"},null,512),[[u,o.value.account_number]])])]),t("div",T,[t("div",tt,[e[16]||(e[16]=t("label",{for:"mfo"},"–ú–§–û",-1)),i(t("input",{id:"mfo","onUpdate:modelValue":e[4]||(e[4]=n=>o.value.mfo=n),type:"text",class:"form-input"},null,512),[[u,o.value.mfo]])]),t("div",et,[e[17]||(e[17]=t("label",{for:"inn"},"–ò–ù–ù",-1)),i(t("input",{id:"inn","onUpdate:modelValue":e[5]||(e[5]=n=>o.value.inn=n),type:"text",class:"form-input"},null,512),[[u,o.value.inn]])])]),t("div",nt,[e[18]||(e[18]=t("label",{for:"treasury_account"},"–ö–∞–∑–Ω–∞—á–µ–π—Å–∫–∏–π —Å—á–µ—Ç",-1)),i(t("input",{id:"treasury_account","onUpdate:modelValue":e[6]||(e[6]=n=>o.value.treasury_account=n),type:"text",class:"form-input"},null,512),[[u,o.value.treasury_account]])]),t("div",ot,[t("div",at,[e[19]||(e[19]=t("label",{for:"commission_percentage"},"–ö–æ–º–∏—Å—Å–∏—è –ø—Ä–æ—Ü–µ–Ω—Ç (%)",-1)),i(t("input",{id:"commission_percentage","onUpdate:modelValue":e[7]||(e[7]=n=>o.value.commission_percentage=n),type:"number",step:"0.01",class:"form-input",placeholder:"0.00"},null,512),[[u,o.value.commission_percentage,void 0,{number:!0}]])]),t("div",st,[e[20]||(e[20]=t("label",{for:"commission_fixed"},"–ö–æ–º–∏—Å—Å–∏—è —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è (UZS)",-1)),i(t("input",{id:"commission_fixed","onUpdate:modelValue":e[8]||(e[8]=n=>o.value.commission_fixed=n),type:"number",step:"0.01",class:"form-input",placeholder:"0.00"},null,512),[[u,o.value.commission_fixed,void 0,{number:!0}]])])]),t("div",lt,[t("button",{type:"submit",class:"btn btn-primary",disabled:b.value},s(b.value?"–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...":"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"),9,it),t("button",{type:"button",onClick:w,class:"btn btn-secondary"}," –û—Ç–º–µ–Ω–∞ ")])],32)])])])):V("",!0)]))}},ct=B(ut,[["__scopeId","data-v-31157dbc"]]);export{ct as default};
