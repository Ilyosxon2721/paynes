import{q as k,r as m,y as C,z as c,a,o,b as t,d as x,w,f as N,F as S,e as F,h as $,t as r,n as I,i as p,s as V}from"./app-DmhU3QBQ.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";const D={class:"credits-page"},z={class:"page-header"},A={key:0,class:"loading"},T={key:1,class:"empty-state"},U={key:2,class:"table-card"},q={class:"data-table"},E={class:"text-small"},L={class:"font-mono"},M={class:"action-buttons"},R=["onClick"],Z=["onClick"],j={__name:"Index",setup(G){const f=k(),i=m([]),d=m(!1);C(()=>u());async function u(){d.value=!0;try{const n=await c.get("/credits");n.data.success&&(i.value=n.data.data.data||n.data.data)}catch(n){console.error(n)}finally{d.value=!1}}async function _(n){var s,l;if(confirm("Подтвердить кредит?"))try{await c.post(`/credits/${n}/confirm`),await u()}catch(e){alert(((l=(s=e.response)==null?void 0:s.data)==null?void 0:l.message)||"Ошибка")}}async function g(n){var s,l;if(confirm("Удалить кредит?"))try{await c.delete(`/credits/${n}`),await u()}catch(e){alert(((l=(s=e.response)==null?void 0:s.data)==null?void 0:l.message)||"Ошибка")}}function h(n){return new Intl.NumberFormat("ru-RU",{minimumFractionDigits:2,maximumFractionDigits:2}).format(n)}function b(n){return{pending:"Ожидание",confirmed:"Подтвержден",deleted:"Удален"}[n]||n}function v(n){return{pending:"warning",confirmed:"success",deleted:"danger"}[n]||"default"}return(n,s)=>{const l=N("router-link");return o(),a("div",D,[t("div",z,[s[1]||(s[1]=t("h1",{class:"page-title"},"Кредиты",-1)),x(l,{to:"/credits/create",class:"btn btn-primary"},{default:w(()=>[...s[0]||(s[0]=[$(" + Новый кредит ",-1)])]),_:1})]),d.value?(o(),a("div",A,"Загрузка...")):i.value.length===0?(o(),a("div",T,[...s[2]||(s[2]=[t("p",null,"Кредиты не найдены",-1)])])):(o(),a("div",U,[t("table",q,[s[3]||(s[3]=t("thead",null,[t("tr",null,[t("th",null,"Дата/время"),t("th",null,"Получатель"),t("th",null,"Счет"),t("th",null,"Филиал"),t("th",null,"Сумма"),t("th",null,"Статус"),t("th",null,"Действия")])],-1)),t("tbody",null,[(o(!0),a(S,null,F(i.value,e=>(o(),a("tr",{key:e.id},[t("td",null,[t("div",null,r(e.date),1),t("div",E,r(e.time),1)]),t("td",null,r(e.recipient),1),t("td",L,r(e.account_number),1),t("td",null,r(e.branch),1),t("td",null,r(h(e.amount??e.debit))+" UZS",1),t("td",null,[t("span",{class:I(["badge",`badge-${v(e.status)}`])},r(b(e.status)),3)]),t("td",null,[t("div",M,[V(f).isAdmin&&e.status==="pending"?(o(),a("button",{key:0,onClick:y=>_(e.id),class:"btn-action btn-success",title:"Подтвердить"}," ✓ ",8,R)):p("",!0),e.status==="pending"?(o(),a("button",{key:1,onClick:y=>g(e.id),class:"btn-action btn-danger",title:"Удалить"}," × ",8,Z)):p("",!0)])])]))),128))])])]))])}}},K=B(j,[["__scopeId","data-v-3d6f4485"]]);export{K as default};
